!!! Strict
%html{ "xml:lang" => "en", :lang => "en", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %title
      = h(yield(:title) || "NeiWorld")
    %meta{ :content => "text/xhtml; charset=utf-8", "http-equiv" => "content-type" }
    %link{ :href => "/images/favicon.ico", :rel => "icon", :type => "image/png" }
    %meta{ :name => "keywords", :content => h(@meta_keywords.gsub(/&lt;\/?[^&gt;]*&gt;/, "&quot;&quot;")) }
    %meta{ :name => "description", :content => h(@meta_description.gsub(/&lt;\/?[^&gt;]*&gt;/, "&quot;&quot;")) }
    /Framework CSS
    %link{ :href => "/stylesheets/blueprint/screen.css", :rel => "stylesheet", :media => "screen, projection", :type => "text/css" }
    %link{ :href => "/stylesheets/blueprint/print.css", :rel => "stylesheet", :media => "print", :type => "text/css" }
    /[if IE]><link rel="stylesheet" href="/stylesheets/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]
    = stylesheet_link_tag 'application'
    = javascript_include_tag :defaults
    - if @google_map
      %script{:type => "text/javascript", :src => "http://maps.google.com/maps/api/js?sensor=false"}
    /additional head elements
    = yield :head
  %body
    #container.container
      /.showgrid
      /#header.span-24.last
      /  #header_supertitle.span-24.last.language_bar
      /    = locale_link("en-US", "English")
      /    \&nbsp;
      /  #header_title.span-24.last
      /    %span.prepend-1
      /      = t("app.site_title")
      /  #header_subtitle.span-24.last
      /    %span.prepend-2
      /      = t("app.site_subtitle")
      #nav.span-24.last.menu_bar
        %span{ :style => "float: right" }
          - if !current_user
            = link_to_unless_current t('app.menu.postings'), postings_path
            |
            = link_to_unless_current t('app.menu.register'), new_account_path
            |
            = link_to_unless_current t('app.menu.login'), new_user_session_path
            |
            = link_to_unless_current t('app.menu.forgot_password'), new_password_reset_path
          - else
            = link_to_unless_current t('app.menu.postings'), postings_path
            |
            = link_to_unless_current t('app.menu.admin_users'), admin_users_path
            |
            = link_to_unless_current t('app.menu.my_account'), edit_account_path
            |
            = link_to_unless_current t('app.menu.logout'), user_session_path, :method => :delete,  :confirm => t('app.menu.logout_confirm')
          \&nbsp;
        \&nbsp;
      #main_body.span-24.last
        /Left column here
        .span-4
          \&nbsp;
          = yield :left
        /Middle column here
        #content.span-16
          %hr.plain
          - if show_title?
            %h1= h yield(:title)
          = flash_messages
          = yield :layout
        /Right column here
        .span-4.last
          = yield :right
          \&nbsp;
      #footer.span-24.last
        %p= "Copyright &copy; 2009 dontrush.org"
    /additional elements e.g. javascript
    = yield :foot
